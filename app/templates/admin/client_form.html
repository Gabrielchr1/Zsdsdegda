{% extends "admin/base_admin.html" %}

{% block content %}
<div class="d-flex justify-content-between align-items-center mb-4">
    <h1 class="mt-4">{{ title }}</h1>
</div>

<div class="card shadow-sm">
    <div class="card-body p-4">

        <ul class="nav nav-pills nav-fill mb-4 form-type-toggle" id="clientTypeToggle" role="tablist">
            <li class="nav-item" role="presentation">
                <button class="nav-link active" id="pf-tab" data-bs-toggle="tab" data-bs-target="#form-pf" type="button" role="tab" aria-controls="form-pf" aria-selected="true">
                    <i class="fas fa-user me-2"></i>Pessoa Física
                </button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="pj-tab" data-bs-toggle="tab" data-bs-target="#form-pj" type="button" role="tab" aria-controls="form-pj" aria-selected="false">
                    <i class="fas fa-building me-2"></i>Pessoa Jurídica
                </button>
            </li>
        </ul>

        <form method="POST" action="" novalidate>
            {{ form.hidden_tag() }}
            {{ form.client_type(id="client_type_input", value="PF", class="d-none") }}

            <h4 class="text-muted fw-light mt-4 mb-3">Dados Principais</h4>

            <div id="form-pf">
                <div class="row">
                    <div class="col-md-6 mb-3">
                        <label for="name_pf" class="form-label">Nome Completo</label>
                        {{ form.name(class="form-control", id="name_pf") }}
                    </div>
                    <div class="col-md-6 mb-3">
                        <label for="cpf" class="form-label">CPF</label>
                        {{ form.cpf_cnpj(class="form-control", id="cpf") }}
                    </div>
                </div>
            </div>

            <div id="form-pj" class="d-none">
                <div class="row">
                    <div class="col-md-4 mb-3">
                        <label for="cnpj" class="form-label">CNPJ</label>
                        {{ form.cpf_cnpj(class="form-control", id="cnpj", placeholder="Digite e aguarde") }}
                    </div>
                     <div class="col-md-8 mb-3">
                        <label for="razao_social" class="form-label">Razão Social</label>
                        {{ form.name(class="form-control", id="razao_social") }}
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-6 mb-3">
                        {{ form.fantasy_name.label(class="form-label") }}
                        {{ form.fantasy_name(class="form-control") }}
                    </div>
                    <div class="col-md-6 mb-3">
                        {{ form.state_registration.label(class="form-label") }}
                        {{ form.state_registration(class="form-control") }}
                    </div>
                </div>
            </div>

            <hr class="form-section-divider">
            <h4 class="text-muted fw-light mb-3">Contato e Endereço</h4>
            
            <div class="row">
                <div class="col-md-6 mb-3">{{ form.email.label(class="form-label") }}{{ form.email(class="form-control") }}</div>
                <div class="col-md-6 mb-3">{{ form.phone.label(class="form-label") }}{{ form.phone(class="form-control") }}</div>
            </div>

            <div class="row align-items-end">
                <div class="col-md-3 mb-3">
                    <label for="cep" class="form-label">CEP</label>
                    {{ form.cep(class="form-control", id="cep", placeholder="Digite o CEP") }}
                </div>
                <div class="col-md-7 mb-3">{{ form.address.label(class="form-label") }}{{ form.address(class="form-control", id="logradouro") }}</div>
                <div class="col-md-2 mb-3">{{ form.number.label(class="form-label") }}{{ form.number(class="form-control") }}</div>
            </div>
            <div class="row">
                <div class="col-md-4 mb-3">{{ form.complement.label(class="form-label") }}{{ form.complement(class="form-control") }}</div>
                <div class="col-md-4 mb-3">{{ form.neighborhood.label(class="form-label") }}{{ form.neighborhood(class="form-control", id="bairro") }}</div>
                <div class="col-md-3 mb-3">{{ form.city.label(class="form-label") }}{{ form.city(class="form-control", id="cidade") }}</div>
                <div class="col-md-1 mb-3">{{ form.state.label(class="form-label") }}{{ form.state(class="form-control", id="uf") }}</div>
            </div>
            
            <hr class="form-section-divider">

            <div class="d-flex justify-content-end gap-2">
                <a href="{{ url_for('main.clients') }}" class="btn btn-light">Cancelar</a>
                {{ form.submit(class="btn btn-success") }}
            </div>
        </form>
    </div>
</div>
{% endblock %}